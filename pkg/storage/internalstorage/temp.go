package internalstorage

import (
	"bytes"

	"github.com/clusterpedia-io/clusterpedia/pkg/kubeapiserver/storageconfig"
	appsv1 "k8s.io/api/apps/v1"
	"k8s.io/apimachinery/pkg/runtime"
	"k8s.io/apimachinery/pkg/runtime/schema"
)

var objects [][]byte

var DeploymentList runtime.Object

func init() {
	var factory = storageconfig.NewStorageConfigFactory()
	config, err := factory.NewConfig(schema.GroupVersionResource{"apps", "v1", "deployments"})
	if err != nil {
		panic(err)
	}
	codec := config.Codec

	deploymentList := &appsv1.DeploymentList{}
	if returned, _, err := codec.Decode([]byte(data), nil, deploymentList); err != nil {
		panic(err)
	} else if deploymentList != returned {
		panic("decode error")
	}
	DeploymentList = deploymentList

	for _, deploy := range deploymentList.Items {
		var buffer bytes.Buffer
		codec.Encode(&deploy, &buffer)
		objects = append(objects, buffer.Bytes())
	}
}

var data = `{"kind":"DeploymentList","apiVersion":"apps/v1","metadata":{},"items":[{"metadata":{"name":"calico-apiserver","namespace":"calico-apiserver","uid":"1824c279-94cf-4fe7-a520-3103bf720735","resourceVersion":"67884277","generation":4,"creationTimestamp":"2021-09-24T10:19:54Z","labels":{"apiserver":"true","k8s-app":"calico-apiserver"},"annotations":{"deployment.kubernetes.io/revision":"2","shadow.clusterpedia.io/cluster-name":"cluster-1"},"ownerReferences":[{"apiVersion":"operator.tigera.io/v1","kind":"APIServer","name":"default","uid":"eba3d4bd-9154-4c37-bb8f-60c96591aafa","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":1,"selector":{"matchLabels":{"apiserver":"true"}},"template":{"metadata":{"name":"calico-apiserver","namespace":"calico-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","k8s-app":"calico-apiserver"}},"spec":{"volumes":[{"name":"calico-apiserver-certs","secret":{"secretName":"calico-apiserver-certs","defaultMode":420}}],"containers":[{"name":"calico-apiserver","image":"docker.io/calico/apiserver:v3.20.1","args":["--secure-port=5443"],"env":[{"name":"DATASTORE_TYPE","value":"kubernetes"},{"name":"KUBERNETES_SERVICE_HOST","value":"10.96.0.1"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"},{"name":"MULTI_INTERFACE_MODE","value":"none"}],"resources":{},"volumeMounts":[{"name":"calico-apiserver-certs","mountPath":"/code/apiserver.local.config/certificates"}],"livenessProbe":{"httpGet":{"path":"/version","port":5443,"scheme":"HTTPS"},"initialDelaySeconds":90,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/code/filecheck"]},"initialDelaySeconds":5,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":5},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":false,"runAsUser":0}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeSelector":{"kubernetes.io/os":"linux"},"serviceAccountName":"calico-apiserver","serviceAccount":"calico-apiserver","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"}]}},"strategy":{"type":"Recreate"},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":4,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-09-24T10:20:07Z","lastTransitionTime":"2021-09-24T10:19:54Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"calico-apiserver-77dffffcdf\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:10Z","lastTransitionTime":"2022-03-23T02:55:10Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"calico-kube-controllers","namespace":"calico-system","uid":"d8e56e30-920a-443a-9f7d-8e1d5d74cce5","resourceVersion":"67884417","generation":1,"creationTimestamp":"2021-09-24T10:19:24Z","labels":{"k8s-app":"calico-kube-controllers"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"},"ownerReferences":[{"apiVersion":"operator.tigera.io/v1","kind":"Installation","name":"default","uid":"65e41c57-4464-41ee-9de4-d6bc15f0d6d1","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":1,"selector":{"matchLabels":{"k8s-app":"calico-kube-controllers"}},"template":{"metadata":{"name":"calico-kube-controllers","namespace":"calico-system","creationTimestamp":null,"labels":{"k8s-app":"calico-kube-controllers"}},"spec":{"containers":[{"name":"calico-kube-controllers","image":"docker.io/calico/kube-controllers:v3.20.1","env":[{"name":"DATASTORE_TYPE","value":"kubernetes"},{"name":"KUBERNETES_SERVICE_HOST","value":"10.96.0.1"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"},{"name":"ENABLED_CONTROLLERS","value":"node"}],"resources":{},"livenessProbe":{"exec":{"command":["/usr/bin/check-status","-l"]},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":6},"readinessProbe":{"exec":{"command":["/usr/bin/check-status","-r"]},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeSelector":{"kubernetes.io/os":"linux"},"serviceAccountName":"calico-kube-controllers","serviceAccount":"calico-kube-controllers","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"},{"key":"CriticalAddonsOnly","operator":"Exists"}],"priorityClassName":"calico-priority"}},"strategy":{"type":"Recreate"},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-09-24T10:19:41Z","lastTransitionTime":"2021-09-24T10:19:24Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"calico-kube-controllers-bdd5f97c5\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:16Z","lastTransitionTime":"2022-03-23T02:55:16Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"calico-typha","namespace":"calico-system","uid":"aa804c29-1a51-400f-b012-198fa2bc2111","resourceVersion":"67884309","generation":2,"creationTimestamp":"2021-09-24T10:19:23Z","labels":{"k8s-app":"calico-typha"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"},"ownerReferences":[{"apiVersion":"operator.tigera.io/v1","kind":"Installation","name":"default","uid":"65e41c57-4464-41ee-9de4-d6bc15f0d6d1","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"k8s-app":"calico-typha"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"k8s-app":"calico-typha"},"annotations":{"hash.operator.tigera.io/typha-ca":"72cf9c0637af3f630e9068d8be24046f690fd7ab","hash.operator.tigera.io/typha-cert":"e4facfd9d8173b082de012cfe3985288a9bb1bd9"}},"spec":{"volumes":[{"name":"typha-ca","configMap":{"name":"typha-ca","defaultMode":420}},{"name":"typha-certs","secret":{"secretName":"typha-certs","defaultMode":420}}],"containers":[{"name":"calico-typha","image":"docker.io/calico/typha:v3.20.1","ports":[{"name":"calico-typha","hostPort":5473,"containerPort":5473,"protocol":"TCP"}],"env":[{"name":"TYPHA_LOGSEVERITYSCREEN","value":"info"},{"name":"TYPHA_LOGFILEPATH","value":"none"},{"name":"TYPHA_LOGSEVERITYSYS","value":"none"},{"name":"TYPHA_CONNECTIONREBALANCINGMODE","value":"kubernetes"},{"name":"TYPHA_DATASTORETYPE","value":"kubernetes"},{"name":"TYPHA_HEALTHENABLED","value":"true"},{"name":"TYPHA_K8SNAMESPACE","value":"calico-system"},{"name":"TYPHA_CAFILE","value":"/typha-ca/caBundle"},{"name":"TYPHA_SERVERCERTFILE","value":"/typha-certs/cert.crt"},{"name":"TYPHA_SERVERKEYFILE","value":"/typha-certs/key.key"},{"name":"TYPHA_CLIENTCN","valueFrom":{"secretKeyRef":{"name":"node-certs","key":"common-name","optional":true}}},{"name":"TYPHA_CLIENTURISAN","valueFrom":{"secretKeyRef":{"name":"node-certs","key":"uri-san","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"10.96.0.1"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"resources":{},"volumeMounts":[{"name":"typha-ca","readOnly":true,"mountPath":"/typha-ca"},{"name":"typha-certs","readOnly":true,"mountPath":"/typha-certs"}],"livenessProbe":{"httpGet":{"path":"/liveness","port":9098,"host":"localhost","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/readiness","port":9098,"host":"localhost","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":0,"dnsPolicy":"ClusterFirst","nodeSelector":{"kubernetes.io/os":"linux"},"serviceAccountName":"calico-typha","serviceAccount":"calico-typha","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists","effect":"NoSchedule"},{"operator":"Exists","effect":"NoExecute"}],"priorityClassName":"calico-priority"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":1,"maxSurge":"25%"}},"revisionHistoryLimit":2,"progressDeadlineSeconds":600},"status":{"observedGeneration":2,"replicas":2,"updatedReplicas":2,"readyReplicas":2,"availableReplicas":2,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2021-09-24T10:19:23Z","lastTransitionTime":"2021-09-24T10:19:23Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2021-09-24T10:19:26Z","lastTransitionTime":"2021-09-24T10:19:23Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"calico-typha-7f8b748f96\" has successfully progressed."}]}},{"metadata":{"name":"capi-kubeadm-bootstrap-controller-manager","namespace":"capi-kubeadm-bootstrap-system","uid":"ada891a4-4efb-4ad9-a683-6cbcca00fdb5","resourceVersion":"67884540","generation":1,"creationTimestamp":"2021-10-21T03:28:49Z","labels":{"cluster.x-k8s.io/provider":"bootstrap-kubeadm","clusterctl.cluster.x-k8s.io":"","control-plane":"controller-manager"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"cluster.x-k8s.io/provider":"bootstrap-kubeadm","control-plane":"controller-manager"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"cluster.x-k8s.io/provider":"bootstrap-kubeadm","control-plane":"controller-manager"}},"spec":{"volumes":[{"name":"cert","secret":{"secretName":"capi-kubeadm-bootstrap-webhook-service-cert","defaultMode":420}}],"containers":[{"name":"manager","image":"daocloud.io/enterprise/kubeadm-bootstrap-controller:v0.4.3","command":["/manager"],"args":["--leader-elect","--metrics-bind-addr=localhost:8080","--feature-gates=MachinePool=false"],"ports":[{"name":"webhook-server","containerPort":9443,"protocol":"TCP"},{"name":"healthz","containerPort":9440,"protocol":"TCP"}],"resources":{},"volumeMounts":[{"name":"cert","readOnly":true,"mountPath":"/tmp/k8s-webhook-server/serving-certs"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/readyz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":10,"dnsPolicy":"ClusterFirst","serviceAccountName":"capi-kubeadm-bootstrap-manager","serviceAccount":"capi-kubeadm-bootstrap-manager","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"}]}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-10-21T03:29:36Z","lastTransitionTime":"2021-10-21T03:28:49Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"capi-kubeadm-bootstrap-controller-manager-d497fbf5c\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:25Z","lastTransitionTime":"2022-03-23T02:55:25Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"capi-kubeadm-control-plane-controller-manager","namespace":"capi-kubeadm-control-plane-system","uid":"c365c344-4674-4352-905f-1b0827fe9767","resourceVersion":"67884544","generation":1,"creationTimestamp":"2021-10-21T03:28:53Z","labels":{"cluster.x-k8s.io/provider":"control-plane-kubeadm","clusterctl.cluster.x-k8s.io":"","control-plane":"controller-manager"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"cluster.x-k8s.io/provider":"control-plane-kubeadm","control-plane":"controller-manager"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"cluster.x-k8s.io/provider":"control-plane-kubeadm","control-plane":"controller-manager"}},"spec":{"volumes":[{"name":"cert","secret":{"secretName":"capi-kubeadm-control-plane-webhook-service-cert","defaultMode":420}}],"containers":[{"name":"manager","image":"daocloud.io/enterprise/kubeadm-control-plane-controller:v0.4.3","command":["/manager"],"args":["--leader-elect","--metrics-bind-addr=localhost:8080","--feature-gates=ClusterTopology=true"],"ports":[{"name":"webhook-server","containerPort":9443,"protocol":"TCP"},{"name":"healthz","containerPort":9440,"protocol":"TCP"}],"resources":{},"volumeMounts":[{"name":"cert","readOnly":true,"mountPath":"/tmp/k8s-webhook-server/serving-certs"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/readyz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":10,"dnsPolicy":"ClusterFirst","serviceAccountName":"capi-kubeadm-control-plane-manager","serviceAccount":"capi-kubeadm-control-plane-manager","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"}]}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-10-21T03:30:00Z","lastTransitionTime":"2021-10-21T03:28:53Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"capi-kubeadm-control-plane-controller-manager-6fbb845948\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:25Z","lastTransitionTime":"2022-03-23T02:55:25Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"capi-controller-manager","namespace":"capi-system","uid":"06951621-ac5c-473a-addd-c5f182976579","resourceVersion":"67884372","generation":1,"creationTimestamp":"2021-10-21T03:28:47Z","labels":{"cluster.x-k8s.io/provider":"cluster-api","clusterctl.cluster.x-k8s.io":"","control-plane":"controller-manager"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"cluster.x-k8s.io/provider":"cluster-api","control-plane":"controller-manager"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"cluster.x-k8s.io/provider":"cluster-api","control-plane":"controller-manager"}},"spec":{"volumes":[{"name":"cert","secret":{"secretName":"capi-webhook-service-cert","defaultMode":420}}],"containers":[{"name":"manager","image":"daocloud.io/enterprise/cluster-api-controller:v0.4.3","command":["/manager"],"args":["--leader-elect","--metrics-bind-addr=localhost:8080","--feature-gates=MachinePool=false,ClusterResourceSet=true,ClusterTopology=true"],"ports":[{"name":"webhook-server","containerPort":9443,"protocol":"TCP"},{"name":"healthz","containerPort":9440,"protocol":"TCP"}],"resources":{},"volumeMounts":[{"name":"cert","readOnly":true,"mountPath":"/tmp/k8s-webhook-server/serving-certs"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/readyz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":10,"dnsPolicy":"ClusterFirst","serviceAccountName":"capi-manager","serviceAccount":"capi-manager","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"}]}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-10-21T03:29:15Z","lastTransitionTime":"2021-10-21T03:28:47Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"capi-controller-manager-85b4696f79\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:14Z","lastTransitionTime":"2022-03-23T02:55:14Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"capv-controller-manager","namespace":"capv-system","uid":"ed1c2832-599c-4a29-aef1-5bf4448e6d27","resourceVersion":"67884535","generation":1,"creationTimestamp":"2021-10-21T03:28:56Z","labels":{"cluster.x-k8s.io/provider":"infrastructure-vsphere","clusterctl.cluster.x-k8s.io":"","control-plane":"controller-manager"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"cluster.x-k8s.io/provider":"infrastructure-vsphere","control-plane":"controller-manager"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"cluster.x-k8s.io/provider":"infrastructure-vsphere","control-plane":"controller-manager"}},"spec":{"volumes":[{"name":"cert","secret":{"secretName":"capv-webhook-service-cert","defaultMode":420}},{"name":"manager-bootstrap-credentials","secret":{"secretName":"capv-manager-bootstrap-credentials","defaultMode":420}}],"containers":[{"name":"manager","image":"daocloud.io/enterprise/manager:v0.8.1","args":["--enable-leader-election","--logtostderr","--v=4"],"ports":[{"name":"webhook-server","containerPort":9443,"protocol":"TCP"},{"name":"healthz","containerPort":9440,"protocol":"TCP"}],"resources":{},"volumeMounts":[{"name":"cert","readOnly":true,"mountPath":"/tmp/k8s-webhook-server/serving-certs"},{"name":"manager-bootstrap-credentials","readOnly":true,"mountPath":"/etc/capv"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/readyz","port":"healthz","scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"kube-rbac-proxy","image":"daocloud.io/enterprise/kube-rbac-proxy:v0.8.0","args":["--secure-listen-address=0.0.0.0:8443","--upstream=http://127.0.0.1:8080/","--logtostderr=true","--v=10"],"ports":[{"name":"https","containerPort":8443,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":10,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"}]}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-10-21T03:30:45Z","lastTransitionTime":"2021-10-21T03:28:56Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"capv-controller-manager-7f4dd9b49f\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:25Z","lastTransitionTime":"2022-03-23T02:55:25Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"cert-manager","namespace":"cert-manager","uid":"8b3087f9-1bd9-407a-8239-8dcae1ae9b16","resourceVersion":"67884238","generation":3,"creationTimestamp":"2021-10-21T03:21:11Z","labels":{"app":"cert-manager","app.kubernetes.io/component":"controller","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"cert-manager","app.kubernetes.io/version":"v1.5.4"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/component":"controller","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"cert-manager"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"cert-manager","app.kubernetes.io/component":"controller","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"cert-manager","app.kubernetes.io/version":"v1.5.4"},"annotations":{"prometheus.io/path":"/metrics","prometheus.io/port":"9402","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"cert-manager","image":"quay.io/jetstack/cert-manager-controller:v1.5.4","args":["--v=2","--cluster-resource-namespace=$(POD_NAMESPACE)","--leader-election-namespace=kube-system"],"ports":[{"containerPort":9402,"protocol":"TCP"}],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"cert-manager","serviceAccount":"cert-manager","securityContext":{"runAsNonRoot":true},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":3,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-10-21T03:21:35Z","lastTransitionTime":"2021-10-21T03:21:11Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"cert-manager-7c6f78c46d\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:09Z","lastTransitionTime":"2022-03-23T02:55:09Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"cert-manager-cainjector","namespace":"cert-manager","uid":"8d4ff57f-28c2-4b93-a0ba-935aed4f0a07","resourceVersion":"67884616","generation":1,"creationTimestamp":"2021-10-21T03:21:11Z","labels":{"app":"cainjector","app.kubernetes.io/component":"cainjector","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"cainjector","app.kubernetes.io/version":"v1.5.4"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/component":"cainjector","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"cainjector"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"cainjector","app.kubernetes.io/component":"cainjector","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"cainjector","app.kubernetes.io/version":"v1.5.4"}},"spec":{"containers":[{"name":"cert-manager","image":"quay.io/jetstack/cert-manager-cainjector:v1.5.4","args":["--v=2","--leader-election-namespace=kube-system"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"cert-manager-cainjector","serviceAccount":"cert-manager-cainjector","securityContext":{"runAsNonRoot":true},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-10-21T03:21:23Z","lastTransitionTime":"2021-10-21T03:21:11Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"cert-manager-cainjector-668d9c86df\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:31Z","lastTransitionTime":"2022-03-23T02:55:31Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}},{"metadata":{"name":"cert-manager-webhook","namespace":"cert-manager","uid":"c0ec6cb2-c0f9-425b-821c-12618e14d7ad","resourceVersion":"67884284","generation":1,"creationTimestamp":"2021-10-21T03:21:11Z","labels":{"app":"webhook","app.kubernetes.io/component":"webhook","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"webhook","app.kubernetes.io/version":"v1.5.4"},"annotations":{"deployment.kubernetes.io/revision":"1","shadow.clusterpedia.io/cluster-name":"cluster-1"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/component":"webhook","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"webhook"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"webhook","app.kubernetes.io/component":"webhook","app.kubernetes.io/instance":"cert-manager","app.kubernetes.io/name":"webhook","app.kubernetes.io/version":"v1.5.4"}},"spec":{"containers":[{"name":"cert-manager","image":"quay.io/jetstack/cert-manager-webhook:v1.5.4","args":["--v=2","--secure-port=10250","--dynamic-serving-ca-secret-namespace=$(POD_NAMESPACE)","--dynamic-serving-ca-secret-name=cert-manager-webhook-ca","--dynamic-serving-dns-names=cert-manager-webhook,cert-manager-webhook.cert-manager,cert-manager-webhook.cert-manager.svc"],"ports":[{"name":"https","containerPort":10250,"protocol":"TCP"}],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{},"livenessProbe":{"httpGet":{"path":"/livez","port":6080,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/healthz","port":6080,"scheme":"HTTP"},"initialDelaySeconds":5,"timeoutSeconds":1,"periodSeconds":5,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"cert-manager-webhook","serviceAccount":"cert-manager-webhook","securityContext":{"runAsNonRoot":true},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2021-10-21T03:21:51Z","lastTransitionTime":"2021-10-21T03:21:11Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"cert-manager-webhook-764b556954\" has successfully progressed."},{"type":"Available","status":"True","lastUpdateTime":"2022-03-23T02:55:10Z","lastTransitionTime":"2022-03-23T02:55:10Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."}]}}]}`
